# 寄存器分配

## 控制流图

在讨论寄存器分配优化的时候，最常用的 ir 是控制流图（Control Flow Graph，CFG）。
在不引起混淆的时候，也会用流图称呼控制流图。

做如下定义：

```
P   :   F+                      # 程序 P 由若干函数 F 构成
    ;
F   :   f(x*) { B+ }            # 函数由若干形式参数 x 和函数体构成
    ;                           # 函数体由若干基本块 B 构成
B   :   L: S* J                 # 基本块由标签 L，包含的若干语句 S 和跳转语句 J 构成
    ;
S   :   y = f(x*)               # 语句可以是函数调用，需要若干参数 x 的加载，状态保存和跳转
    |   y = i(x*)               # 语句可以是一条指令，需要若干数据 x 参与
    |   [y] = x                 # 语句可以是一个
    |   y = [x]
    |   y = x
    ;
J   :   goto L
    |   if x then L else L
    |   return x
    ;
```




## 图着色

## 线性扫描

## 线性规划

## PBQP 分配